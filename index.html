<!DOCTYPE html>
<html>
  <head>
    <style>
      /* Customize the label (the container) */
      .container {
        display: block;
        position: relative;
        padding-left: 35px;
        margin-bottom: 15px;
        cursor: pointer;
        font-size: 22px;
        line-height: 20px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      /* Hide the browser's default radio button */
      .container input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
      }

      /* Create a custom radio button */
      .checkmark {
        position: absolute;
        top: 0;
        left: 0;
        height: 25px;
        width: 25px;
        background-color: #eee;
        border-radius: 50%;
      }

      .rounded-checkbox {
        border-radius: 10%;
      }

      .container .rounded-checkbox:after {
        top: 7px !important;
        left: 7px !important;
        width: 12px !important;
        height: 12px !important;
        border-radius: 10% !important;
      }

      /* On mouse-over, add a grey background color */
      .container:hover input ~ .checkmark {
        background-color: #ccc;
      }

      /* When the radio button is checked, add a blue background */
      .container input:checked ~ .checkmark {
        background-color: #2196f3;
      }

      /* Create the indicator (the dot/circle - hidden when not checked) */
      .checkmark:after {
        content: "";
        position: absolute;
        display: none;
      }

      /* Show the indicator (dot/circle) when checked */
      .container input:checked ~ .checkmark:after {
        display: block;
      }

      /* Style the indicator (dot/circle) */
      .container .checkmark:after {
        top: 9px;
        left: 9px;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: white;
      }

      .slidecontainer {
        width: 100%; /* Width of the outside container */
        font-size: 16px;
        font-weight: bold;
        color: #55f;
        margin-top: 10px;
      }

      .slidecontainer > span {
        margin-left: 20px;
      }

      /* The slider itself */
      .slider {
        -webkit-appearance: none; /* Override default CSS styles */
        appearance: none;
        width: 100%; /* Full-width */
        height: 25px; /* Specified height */
        background: #d3d3d3; /* Grey background */
        outline: none; /* Remove outline */
        opacity: 0.7; /* Set transparency (for mouse-over effects on hover) */
        -webkit-transition: 0.2s; /* 0.2 seconds transition on hover */
        transition: opacity 0.2s;
      }

      /* Mouse-over effects */
      .slider:hover {
        opacity: 1; /* Fully shown on mouse-over */
      }

      /* The slider handle (use -webkit- (Chrome, Opera, Safari, Edge) and -moz- (Firefox) to override default look) */
      .slider::-webkit-slider-thumb {
        -webkit-appearance: none; /* Override default look */
        appearance: none;
        width: 25px; /* Set a specific slider handle width */
        height: 25px; /* Slider handle height */
        background: #88f; /* Green background */
        cursor: pointer; /* Cursor on hover */
      }

      .slider::-moz-range-thumb {
        width: 25px; /* Set a specific slider handle width */
        height: 25px; /* Slider handle height */
        background: #4caf50; /* Green background */
        cursor: pointer; /* Cursor on hover */
      }

      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      .controls {
        margin: 0;
        padding: 10px;
        box-sizing: border-box;
        height: 30%;
        width: 100%;
      }

      .controls > span {
        display: inline-block;
      }

      .kana-mode {
        margin-left: 20px;
        margin-top: 20px;
      }

      .control-buttons {
        position: absolute;
        right: 10px;
        margin-left: 50px;
        margin-bottom: 0;
      }

      .startstop {
        width: 200px;
        height: 40px;
        margin: 10px;
        margin-bottom: 0;
        font-size: 18px;
        font-weight: bold;
        border: #2196f3;
        background: #aaf;
      }

      .startstop:hover {
        background: #55f;
      }

      .display {
        background: #ddf;
        height: 70%;
        text-align: center;
        vertical-align: middle;
        line-height: 100%;
      }

      .flashcard-text {
        position: relative;
        top: 50%;
        transform: translateY(-50%);
        font-size: 125pt;
      }

      .flashcard-answer {
        position: relative;
        top: 75%;
        transform: translateY(-50%);
        font-size: 75pt;
      }

      .show-answers-checkbox {
        float: right;
        margin-right: 25px;
      }
    </style>
  </head>
  <body>
    <div class="display">
      <div id="flashcard" class="flashcard-text">あ</div>
      <div id="answer" class="flashcard-answer" hidden="hidden">a</div>
    </div>
    <div class="controls">
      <div class="slidecontainer">
        <span>Display Speed: <span id="speedDisplay">1 second/card</span></span>
        <span style="width:500"></span>
        <span class="show-answers-checkbox">
          <label class="container"
            >Show Answers
            <input type="checkbox" id="showAnswers" />
            <span class="checkmark rounded-checkbox"></span>
          </label>
        </span>
        <input
          type="range"
          min="100"
          max="5000"
          value="1000"
          class="slider"
          id="speedSlider"
        />
      </div>
      <span class="kana-mode">
        <label class="container"
          >Hiragana
          <input
            type="radio"
            name="charset"
            value="hiragana"
            checked="checked"
          />
          <span class="checkmark"></span>
        </label>
        <label class="container"
          >Katakana
          <input type="radio" name="charset" value="katakana" />
          <span class="checkmark"></span>
        </label>
      </span>
      <span class="control-buttons">
        <div>
          <button class="startstop" onclick="startDisplay()">Start</button>
        </div>
        <div>
          <button class="startstop" onclick="stopDisplay()">Stop</button>
        </div>
      </span>
    </div>
    <script>
      var hiragana = [
        { ch: "あ", ro: "a" },
        { ch: "い", ro: "i" },
        { ch: "う", ro: "u" },
        { ch: "え", ro: "e" },
        { ch: "お", ro: "o" },
        { ch: "か", ro: "ka" },
        { ch: "き", ro: "ki" },
        { ch: "く", ro: "ku" },
        { ch: "け", ro: "ke" },
        { ch: "こ", ro: "ko" },
        { ch: "さ", ro: "sa" },
        { ch: "し", ro: "shi" },
        { ch: "す", ro: "su" },
        { ch: "せ", ro: "se" },
        { ch: "そ", ro: "so" },
        { ch: "た", ro: "ta" },
        { ch: "ち", ro: "chi" },
        { ch: "つ", ro: "tsu" },
        { ch: "て", ro: "te" },
        { ch: "と", ro: "to" },
        { ch: "な", ro: "na" },
        { ch: "に", ro: "ni" },
        { ch: "ぬ", ro: "nu" },
        { ch: "ね", ro: "ne" },
        { ch: "の", ro: "no" },
        { ch: "は", ro: "ha" },
        { ch: "ひ", ro: "hi" },
        { ch: "ふ", ro: "hu" },
        { ch: "へ", ro: "he" },
        { ch: "ほ", ro: "ho" },
        { ch: "ま", ro: "ma" },
        { ch: "み", ro: "mi" },
        { ch: "む", ro: "mu" },
        { ch: "め", ro: "me" },
        { ch: "も", ro: "mo" },
        { ch: "や", ro: "ya" },
        { ch: "ゆ", ro: "yu" },
        { ch: "よ", ro: "yo" },
        { ch: "ら", ro: "ra" },
        { ch: "り", ro: "ri" },
        { ch: "る", ro: "ru" },
        { ch: "れ", ro: "re" },
        { ch: "ろ", ro: "ro" },
        { ch: "わ", ro: "wa" },
        { ch: "を", ro: "wo" },
        { ch: "ん", ro: "n" },
        { ch: "が", ro: "ga" },
        { ch: "ぎ", ro: "gi" },
        { ch: "ぐ", ro: "gu" },
        { ch: "げ", ro: "ge" },
        { ch: "ご", ro: "go" },
        { ch: "ざ", ro: "za" },
        { ch: "じ", ro: "ji" },
        { ch: "ず", ro: "zu" },
        { ch: "ぜ", ro: "ze" },
        { ch: "ぞ", ro: "zo" },
        { ch: "だ", ro: "da" },
        { ch: "ぢ", ro: "ji" },
        { ch: "づ", ro: "zu" },
        { ch: "で", ro: "de" },
        { ch: "ど", ro: "do" },
        { ch: "ば", ro: "ba" },
        { ch: "び", ro: "bi" },
        { ch: "ぶ", ro: "bu" },
        { ch: "べ", ro: "be" },
        { ch: "ぼ", ro: "bo" },
        { ch: "ぱ", ro: "pa" },
        { ch: "ぴ", ro: "pi" },
        { ch: "ぷ", ro: "pu" },
        { ch: "ぺ", ro: "pe" },
        { ch: "ぽ", ro: "po" },
        { ch: "にゃ", ro: "nya" },
        { ch: "にゅ", ro: "nyu" },
        { ch: "にょ", ro: "nyo" },
        { ch: "ちゃ", ro: "cha" },
        { ch: "ちゅ", ro: "chu" },
        { ch: "ちょ", ro: "cho" },
        { ch: "しゃ", ro: "sha" },
        { ch: "しゅ", ro: "shu" },
        { ch: "しょ", ro: "sho" },
        { ch: "きゃ", ro: "kya" },
        { ch: "きゅ", ro: "kyu" },
        { ch: "きょ", ro: "kyo" },
        { ch: "ぎゃ", ro: "gya" },
        { ch: "ぎゅ", ro: "gyu" },
        { ch: "ぎょ", ro: "gyo" },
        { ch: "りゃ", ro: "rya" },
        { ch: "りゅ", ro: "ryu" },
        { ch: "りょ", ro: "ryo" },
        { ch: "みゃ", ro: "mya" },
        { ch: "みゅ", ro: "myu" },
        { ch: "みょ", ro: "myo" },
        { ch: "ひゃ", ro: "hya" },
        { ch: "ひゅ", ro: "hyu" },
        { ch: "ひょ", ro: "hyo" },
        { ch: "じゃ", ro: "ja" },
        { ch: "じゅ", ro: "ju" },
        { ch: "じょ", ro: "jo" },
        { ch: "ぴゃ", ro: "pya" },
        { ch: "ぴゅ", ro: "pyu" },
        { ch: "ぴょ", ro: "pyo" },
        { ch: "びゃ", ro: "bya" },
        { ch: "びゅ", ro: "byu" },
        { ch: "びょ", ro: "byo" }
      ];
      var katakana = [
        { ch: "ア", ro: "a" },
        { ch: "イ", ro: "i" },
        { ch: "ウ", ro: "u" },
        { ch: "エ", ro: "e" },
        { ch: "オ", ro: "o" },
        { ch: "カ", ro: "ka" },
        { ch: "キ", ro: "ki" },
        { ch: "ク", ro: "ku" },
        { ch: "ケ", ro: "ke" },
        { ch: "コ", ro: "ko" },
        { ch: "サ", ro: "sa" },
        { ch: "シ", ro: "shi" },
        { ch: "ス", ro: "su" },
        { ch: "セ", ro: "se" },
        { ch: "ソ", ro: "so" },
        { ch: "タ", ro: "ta" },
        { ch: "チ", ro: "chi" },
        { ch: "ツ", ro: "tsu" },
        { ch: "テ", ro: "te" },
        { ch: "ト", ro: "to" },
        { ch: "ナ", ro: "na" },
        { ch: "ニ", ro: "ni" },
        { ch: "ヌ", ro: "nu" },
        { ch: "ネ", ro: "ne" },
        { ch: "ノ", ro: "no" },
        { ch: "ハ", ro: "ha" },
        { ch: "ヒ", ro: "hi" },
        { ch: "フ", ro: "hu" },
        { ch: "ヘ", ro: "he" },
        { ch: "ホ", ro: "ho" },
        { ch: "マ", ro: "ma" },
        { ch: "ミ", ro: "mi" },
        { ch: "ム", ro: "mu" },
        { ch: "メ", ro: "me" },
        { ch: "モ", ro: "mo" },
        { ch: "ヤ", ro: "ya" },
        { ch: "ユ", ro: "yu" },
        { ch: "ヨ", ro: "yo" },
        { ch: "ラ", ro: "ra" },
        { ch: "リ", ro: "ri" },
        { ch: "ル", ro: "ru" },
        { ch: "レ", ro: "re" },
        { ch: "ロ", ro: "ro" },
        { ch: "ワ", ro: "wa" },
        { ch: "ヲ", ro: "wo" },
        { ch: "ン", ro: "n" },
        { ch: "ガ", ro: "ga" },
        { ch: "ギ", ro: "gi" },
        { ch: "グ", ro: "gu" },
        { ch: "ゲ", ro: "ge" },
        { ch: "ゴ", ro: "go" },
        { ch: "ザ", ro: "za" },
        { ch: "ジ", ro: "ji" },
        { ch: "ズ", ro: "zu" },
        { ch: "ゼ", ro: "ze" },
        { ch: "ゾ", ro: "zo" },
        { ch: "ダ", ro: "da" },
        { ch: "ヂ", ro: "ji" },
        { ch: "ヅ", ro: "zu" },
        { ch: "デ", ro: "de" },
        { ch: "ド", ro: "do" },
        { ch: "バ", ro: "ba" },
        { ch: "ビ", ro: "bi" },
        { ch: "ブ", ro: "bu" },
        { ch: "ベ", ro: "be" },
        { ch: "ボ", ro: "bo" },
        { ch: "パ", ro: "pa" },
        { ch: "ピ", ro: "pi" },
        { ch: "プ", ro: "pu" },
        { ch: "ペ", ro: "pe" },
        { ch: "ポ", ro: "po" },
        { ch: "ニャ", ro: "nya" },
        { ch: "ニュ", ro: "nyu" },
        { ch: "ニョ", ro: "nyo" },
        { ch: "チャ", ro: "cha" },
        { ch: "チュ", ro: "chu" },
        { ch: "チョ", ro: "cho" },
        { ch: "シャ", ro: "sha" },
        { ch: "シュ", ro: "shu" },
        { ch: "ショ", ro: "sho" },
        { ch: "キャ", ro: "kya" },
        { ch: "キュ", ro: "kyu" },
        { ch: "キョ", ro: "kyo" },
        { ch: "ギャ", ro: "gya" },
        { ch: "ギュ", ro: "gyu" },
        { ch: "ギョ", ro: "gyo" },
        { ch: "リャ", ro: "rya" },
        { ch: "リュ", ro: "ryu" },
        { ch: "リョ", ro: "ryo" },
        { ch: "ミャ", ro: "mya" },
        { ch: "ミュ", ro: "myu" },
        { ch: "ミョ", ro: "myo" },
        { ch: "ヒャ", ro: "hya" },
        { ch: "ヒュ", ro: "hyu" },
        { ch: "ヒョ", ro: "hyo" },
        { ch: "ジャ", ro: "ja" },
        { ch: "ジュ", ro: "ju" },
        { ch: "ジョ", ro: "jo" },
        { ch: "ピャ", ro: "pya" },
        { ch: "ピュ", ro: "pyu" },
        { ch: "ピョ", ro: "pyo" },
        { ch: "ビャ", ro: "bya" },
        { ch: "ビュ", ro: "byu" },
        { ch: "ビョ", ro: "byo" }
      ];

      var running = false;
      var showedCardFirst = false;
      var intervalId = null;
      var flashcardDisplay = document.getElementById("flashcard");

      var answerDisplay = document.getElementById("answer");
      var showAnswersCheckbox = document.getElementById("showAnswers");
      showAnswersCheckbox.onchange = function() {
        answerDisplay.hidden = !this.checked;
      };

      var slider = document.getElementById("speedSlider");
      var sliderDisplay = document.getElementById("speedDisplay");
      slider.oninput = updateSliderValue;

      function updateSliderValue() {
        var sliderVal = parseInt(this.value);
        window.clearInterval(intervalId);
        intervalId = window.setInterval(flashcardCallback, sliderVal);
        sliderDisplay.innerHTML = (sliderVal / 1000 || 1) + " seconds/card";
      }

      function isHiraganaSelected() {
        var radios = document.getElementsByName("charset");

        for (var i = 0, length = radios.length; i < length; i++) {
          if (radios[i].checked) {
            return radios[i].value === "hiragana";
            break;
          }
        }
      }

      function flashcardCallback() {
        if (!running) {
          return;
        }

        if (showedCardFirst && showAnswersCheckbox.checked) {
          answerDisplay.hidden = false;
          showedCardFirst = false;
          return;
        }

        answerDisplay.hidden = true;
        var selected = null;
        if (isHiraganaSelected()) {
          selected = hiragana[Math.floor(Math.random() * hiragana.length)];
        } else {
          selected = katakana[Math.floor(Math.random() * katakana.length)];
        }
        flashcardDisplay.innerHTML = selected.ch;
        answerDisplay.innerHTML = selected.ro;
        showedCardFirst = true;
      }

      function startDisplay() {
        running = true;
        window.clearInterval(intervalId);
        intervalId = window.setInterval(
          flashcardCallback,
          parseInt(slider.value)
        );
      }

      function stopDisplay() {
        running = false;
        window.clearInterval(intervalId);
      }
    </script>
  </body>
</html>
